<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Brand Swag</title>

    <link rel="stylesheet" type="text/css" href="./node_modules/swagger-ui-dist/swagger-ui.css" />
    <script src="./node_modules/swagger-ui-dist/swagger-ui-bundle.js" charset="UTF-8"></script>

    <link rel="stylesheet" type="text/css" href="./node_modules/swagger-editor-dist/swagger-editor.css" />
    <script type="text/javascript" src="./node_modules/swagger-editor-dist/swagger-editor-bundle.js"></script>
    <script type="text/javascript"
        src="./node_modules/swagger-editor-dist/swagger-editor-standalone-preset.js"></script>

    <script src="./node_modules/js-yaml/dist/js-yaml.min.js"></script>

    <style>
        .tablist {
            margin-bottom: 0;
        }

        .tablist li {
            display: inline;
            border: solid;
            border-width: 1px 1px 0 1px;
            margin: 0 5px 0 0;
        }

        .tablist li a {
            padding: 0 10px;
        }

        .render-area {
            border: solid 1px black;
            padding: 20px;
            min-height: 120px;
            ;
        }

        .comment-button {
            position: relative;
        }

        .comment-button:hover .comment-hv {
            display: block;
        }

        .comment-hv {
            display: none;
            color: red;
            margin-left: 28px;
            /* moves the tooltip to the right */
            margin-top: 15px;
            /* moves it down */
            position: absolute;
            z-index: 1000;
        }

        .Pane {
            overflow: scroll;
        }
    </style>
</head>

<body>
    <h1>Store Brand Swag</h1>

    <nav>
        <a id="login-link" href="">log in to GitHub</a>
        <div class="search-area" style="display: inline-block;">
            <ul class="tablist">
                <li><a href="javascript:rudrSwitchTab('tb_username', 'search-by-username', 'search-area');"
                        id="tb_username" class="tabmenu active">search by username</a></li>
                <li><a href="javascript:rudrSwitchTab('tb_organization', 'search-by-org', 'search-area');"
                        id="tb_organization" class="tabmenu">search by organization</a></li>
                <li><a href="javascript:rudrSwitchTab('tb_location', 'search-directory', 'search-area');"
                        id="tb_location" class="tabmenu">search by location</a></li>
            </ul>
        </div>
        <div class="swagger-area" style="display: inline-block;">
            <ul class="tablist">
                <li><a href="javascript:rudrSwitchTab('tb_1', 'content_1', 'swagger-area');" id="tb_1"
                        class="tabmenu active">swagger ui</a>
                </li>
                <li><a href="javascript:rudrSwitchTab('tb_2', 'content_2', 'swagger-area');" id="tb_2"
                        class="tabmenu">swagger editor</a></li>
            </ul>
        </div>
        <div style="display: inline-block;">
            <label for="repo-choice">Choose a repository:</label>
            <input list="repo-list" id="repo-choice" name="repo-choice" />

            <datalist id="repo-list"></datalist>

        </div>
        <div style="height: 120px;overflow: scroll;">
            <ol id="repo-file-list"></ol>
        </div>
    </nav>
    <section class="search-area">

        <div class="render-area">

            <div class="tabcontent" id="search-by-username">
                <h2>Search by user</h2>

                <label for="username-input">github username</label>
                <input id="username-input" name="username-input" type="text">
                <button id="username-button" type="button" data-submit-for="username-input">submit it</button>
            </div>

            <div class="tabcontent" id="search-by-org">
                <h2>Search by organization</h2>

                <label for="org-input">github organization</label>
                <input id="org-input" name="org-input" type="text">
                <button id="org-button" type="button" data-submit-for="org-input">submit</button>
            </div>

            <div class="tabcontent" id="search-directory">
                <h2>Search by location</h2>

                <label for="directory-input">directory path or url</label>
                <input id="directory-input" name="directory-input" type="text"
                    value="./assets/examples/joshuawordsmith/store-brand-swag/main/openapi.json">
                <button id="directory-button" type="button" data-submit-for="directory-input">submit</button>
                <ol id="directory-list"></ol>
            </div>
        </div>
    </section>

    <section class="swagger-area" style="position: relative;">
        <div class="render-area">
            <div id="content_1" class="tabcontent">
                <div class="render-container" id="swagger-ui">&nbsp;</div>
            </div>

            <div id="content_2" class="tabcontent" style="display:none;position: relative;height:1000px;">
                <div id="comment-box" style="min-height: 120px;"></div>
                <div class="render-container" id="swagger-editor">&nbsp;</div>
            </div>
        </div>
    </section>

    <script>
        function rudrSwitchTab(rudr_tab_id, rudr_tab_content, tab_section) {
            // first of all we get all tab content blocks (I think the best way to get them by class names)
            const sections = document.getElementsByClassName(tab_section);
            [...sections].forEach((section) => {
                console.log(section);
                var x = section.querySelectorAll(".tabcontent");
                var i;
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = 'none'; // hide all tab content
                }
                var y = section.querySelector(`#${rudr_tab_content}`);
                if (y) {
                    y.style.display = 'block'; // display the content of the tab we need
                }


                // now we get all tab menu items by class names (use the next code only if you need to highlight current tab)
                var x = section.querySelectorAll(".tabmenu");
                var i;
                for (i = 0; i < x.length; i++) {
                    x[i].className = 'tabmenu';
                }
                var y = section.querySelector(`#${rudr_tab_id}`);
                if (y) {
                    y.className = 'tabmenu active';
                }
                setTimeout(() => {
                    window.attachCommentBox();
                }, 200);
            });
        }
        [...document.querySelectorAll('.tabmenu.active')].forEach((node) => {
            node.click();
        });
    </script>

    <script type="text/javascript" src="./src/client/main.js"></script>

</body>

</html>